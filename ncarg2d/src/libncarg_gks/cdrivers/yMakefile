#
#	$Id: yMakefile,v 1.12 2009/04/08 23:25:41 fred Exp $
#

MYNAME		= cdrivers

INCLUDES	= gksP.h
BASICSRC	= fort_c.c gks_device.c gksc.c transform.c gksP.c
CTXTSRC		= ctxt_device.c ctxt.c ctxt_conv.c
XSRC		= xdevice.c font.c text.c x_conv.c xattribute.c xcontrol.c \
		xinquiry.c xoutput.c
PSSRC		= psdevice.c ps.c ps_conv.c psfill.c 
PDFSRC          = pdf.c pdfdevice.c pdf_conv.c pdffill.c

PIXSRC 		= pixcontrol.c     pixoutput.c pixdevice.c \
		pix_conv.c       pixattribute.c  pixinquiry.c \
		pixwrite_xwd.c
#ifdef BuildPNG
PNGSRC		=  pixwrite_png.c
PNGOBJ		=  pixwrite_png.o
PNG_DEFINES  	=  -DBuildPNG
#else
#define PNGSRC
#define PNGOBJ
#endif

#ifdef BuildCAIRO
CAIROSRC	=  cro_device.c cro.c cro_conv.c
CAIROOBJ	=  cro_device.o cro.o cro_conv.o
CAIRO_DEFINES   =  -DBuildCAIRO
#else
#define CAIROSRC
#define CAIROOBJ
#endif

BASICOBJ	= fort_c.o gks_device.o gksc.o transform.o gksP.o
CTXTOBJ		= ctxt_device.o ctxt.o ctxt_conv.o
XOBJ		= xdevice.o font.o text.o x_conv.o xattribute.o xcontrol.o \
		xinquiry.o xoutput.o
PSOBJ		= psdevice.o ps.o ps_conv.o psfill.o
PDFOBJ          = pdf.o pdfdevice.o pdf_conv.o pdffill.o

PIXOBJ 		= pixcontrol.o     pixoutput.o pixdevice.o  \
		pix_conv.o       pixattribute.o  pixinquiry.o \
		pixwrite_xwd.o $(PNGOBJ)

SOURCES		= $(BASICSRC) $(CTXTSRC) $(XSRC) $(PSSRC) $(PDFSRC) $(PIXSRC) $(PNGSRC) $(CAIROSRC)
OBJECTS		= $(BASICOBJ) $(CTXTOBJ) $(XOBJ) $(PSOBJ) $(PDFOBJ) $(PIXOBJ) $(PNGOBJ) $(CAIROOBJ)

EXTRA_CDEFINES	= $(OS_DEF) $(PNG_DEFINES) $(CAIRO_DEFINES) -DCTXT -DX11 -DPS -DPDF -DPIX

PartialLibraryTarget(libncarg_gks.a,$(OBJECTS))
PartialLibraryTarget(libbasegks.a,$(BASICOBJ))

BuildSharedPartialLib(libNGgksCTXT,$(CTXTOBJ),1,0,NullArgument)
BuildSharedPartialLib(libNGgksX,$(XOBJ),1,0,NullArgument)
BuildSharedPartialLib(libNGgksPS,$(PSOBJ),1,0,NullArgument)
BuildSharedPartialLib(libNGgksPDF,$(PDFOBJ),1,0,NullArgument)

PartialSourceLibraryTarget($(MYNAME),srcncarg_gks.a,$(SOURCES))
BuildIncludes($(INCLUDES),ncarg,..)
InstallTarget($(INCLUDES),$(INSTALL_INC),$(NCARGINCPATH))
DependTarget($(SOURCES))
